{% extends "base.html" %}

{% block content %}
<div class="registration">
  <h2>Register</h2>
  <form method="post" id="regForm">
    {% csrf_token %}
    {{ reg_form.as_p }}
    <button type="submit" name="action" value="register">Register</button>
  </form>
</div>

<div class="login">
  <h2>Login</h2>
  <form method="post" id="loginForm">
    {% csrf_token %}
    {{ login_form.as_p }}
    <button type="submit" name="action" value="login">Login</button>
  </form>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    function toggleRegistrationCodeField() {
        const roleSelectVal = $("#regForm [name='role']").val();
        const registrationCodeField = $("#regForm [name='registration_code']").closest('p');
        if (roleSelectVal === "shelter") {
            registrationCodeField.show();
        } else {
            registrationCodeField.hide();
        }
    }

    toggleRegistrationCodeField();
    $("#regForm [name='role']").change(toggleRegistrationCodeField);
});
</script>
{% endblock %}

